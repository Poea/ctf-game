'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.createMap=createMap;var _shortid=require('shortid');var _shortid2=_interopRequireDefault(_shortid);var _lodash=require('lodash');var _constants=require('../constants');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}} /**
 *
 * @param {string} key
 * @returns {Object}
 */function createMap(key){var mapsData=require(_constants.DATA_PATH+'/maps.json');if(!mapsData[key]){throw new Error('Failed to load data for unknown map.')}var mapData=mapsData[key];var json=require(_constants.DATA_PATH+'/'+mapData.src);if(!json){throw new Error('Failed to load unknown map.')}var objects=[];(0,_lodash.forEach)(json.layers,function(layer){if(layer.type===_constants.LAYER_OBJECTS){(0,_lodash.forEach)(layer.objects,function(object){objects.push(object)})}});return {id:_shortid2.default.generate(),key:key,image:mapData.image,music:mapData.music,data:json,layers:json.layers,width:json.width*json.tilesets[0].tilewidth,height:json.height*json.tilesets[0].tileheight,tileWidth:json.tilesets[0].tilewidth,tileHeight:json.tilesets[0].tileheight,objects:objects}}
//# sourceMappingURL=map.js.map