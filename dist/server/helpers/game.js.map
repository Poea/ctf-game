{"version":3,"sources":["../../../src/server/helpers/game.js"],"names":[],"mappings":"8EAUgB,sCAkBA,gDAiBA,4CAsBA,wDAsBA;;;;;GA/ET,SAAS,cAAT,CAAwB,QAAxB,CAAkC,EAAlC,CAAsC,CAC3C,IAAI,OAAS,IAAT,CADuC,mBAG3C,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAY,CAC5B,GAAI,OAAO,EAAP,GAAc,EAAd,CAAkB,CACpB,OAAS,MAAT,CADoB,CADN,CAAlB,CAH2C,OASpC,MAAP,CAT2C;;;;;GAkBtC,SAAS,mBAAT,CAA6B,QAA7B,CAAuC,EAAvC,CAA2C,CAChD,IAAI,OAAS,CAAC,CAAD,CADmC,mBAGhD,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAS,KAAT,CAAmB,CACnC,GAAI,OAAO,EAAP,GAAc,EAAd,CAAkB,CACpB,OAAS,KAAT,CADoB,CADN,CAAlB,CAHgD,OASzC,MAAP,CATgD;;;;GAiB3C,SAAS,iBAAT,CAA2B,QAA3B,CAAqC,CAC1C,IAAI,sBAAJ,CAAkB,OAAS,CAAC,CAAD,CADe,mBAG1C,CAAQ,QAAR,CAAkB,gBAAU,CAC1B,GAAI,OAAO,IAAP,eAAJ,CAA0B,CACxB,IAAI,SAAW,OAAO,OAAP,CAAiB,OAAO,OAAP,CAAe,MAAf,CAAwB,CAAzC,CADS,GAEpB,wBAAY,YAAZ,GAA6B,SAAW,YAAX,CAAyB,CACxD,aAAe,QAAf,CADwD,MAExD,CAAS,OAAO,EAAP,CAF+C,CAF5D,CADgB,CAAlB,CAH0C,OAanC,MAAP,CAb0C;;;;;GAsBrC,SAAS,uBAAT,CAAiC,QAAjC,CAA2C,EAA3C,CAA+C,CACpD,IAAI,OAAS,CAAC,CAAD,CADuC,mBAGpD,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAS,KAAT,CAAmB,CACnC,GAAI,OAAO,IAAP,eAAJ,CAA0B,CACxB,oBAAQ,OAAO,OAAP,CAAgB,kBAAY,CAClC,GAAI,WAAa,EAAb,CAAiB,CACnB,OAAS,KAAT,CADmB,CADC,CAAxB,CADwB,CADV,CAAlB,CAHoD,OAa7C,MAAP,CAboD;;;;;GAsB/C,SAAS,0BAAT,CAAoC,WAApC,CAAiD,SAAjD,CAA4D,CACjE,OAAO,CACL,EAAG,eAAO,OAAP,CAAe,CAAE,IAAK,UAAU,CAAV,CAAa,IAAK,SAAC,CAAU,CAAV,CAAc,UAAU,KAAV,CAAmB,YAAY,KAAZ,CAA1E,CAAH,CACA,EAAG,eAAO,OAAP,CAAe,CAAE,IAAK,UAAU,CAAV,CAAa,IAAK,SAAC,CAAU,CAAV,CAAc,UAAU,MAAV,CAAoB,YAAY,MAAZ,CAA3E,CAAH,CAFF,CADiE","file":"game.js","sourcesContent":["import { forEach, isUndefined } from 'lodash';\nimport { chance } from './vendor';\nimport { TEAM } from '../factories/entity';\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {Object}\n */\nexport function findEntityById(entities, id) {\n  let result = null;\n\n  forEach(entities, (entity) => {\n    if (entity.id === id) {\n      result = entity;\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {number}\n */\nexport function findEntityIndexById(entities, id) {\n  let result = -1;\n\n  forEach(entities, (entity, index) => {\n    if (entity.id === id) {\n      result = index;\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @returns {string}\n */\nexport function findWeakestTeamId(entities) {\n  let leastPlayers, result = -1;\n\n  forEach(entities, entity => {\n    if (entity.type === TEAM) {\n      let teamSize = entity.players ? entity.players.length : 0;\n      if (isUndefined(leastPlayers) || teamSize < leastPlayers) {\n        leastPlayers = teamSize;\n        result = entity.id;\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {number}\n */\nexport function findTeamIndexByPlayerId(entities, id) {\n  let result = -1;\n\n  forEach(entities, (entity, index) => {\n    if (entity.type === TEAM) {\n      forEach(entity.players, playerId => {\n        if (playerId === id) {\n          result = index;\n        }\n      });\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Object} playerProps\n * @param {Object} baseProps\n * @returns {{x: number, y: number}}\n */\nexport function calculateBaseSpawnPosition(playerProps, baseProps) {\n  return {\n    x: chance.integer({ min: baseProps.x, max: (baseProps.x + baseProps.width) - playerProps.width }),\n    y: chance.integer({ min: baseProps.y, max: (baseProps.y + baseProps.height) - playerProps.height })\n  };\n}\n"]}