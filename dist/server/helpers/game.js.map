{"version":3,"sources":["../../../src/server/helpers/game.js"],"names":[],"mappings":"8EASgB,sCAkBA,gDAiBA,kDAsBA,wDAsBA,wCAoBA;;;;;GAnGT,SAAS,cAAT,CAAwB,QAAxB,CAAkC,EAAlC,CAAsC,CAC3C,IAAI,OAAS,IAAT,CADuC,mBAG3C,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAY,CAC5B,GAAI,OAAO,EAAP,GAAc,EAAd,CAAkB,CACpB,OAAS,MAAT,CADoB,CADN,CAAlB,CAH2C,OASpC,MAAP,CAT2C;;;;;GAkBtC,SAAS,mBAAT,CAA6B,QAA7B,CAAuC,EAAvC,CAA2C,CAChD,IAAI,OAAS,CAAC,CAAD,CADmC,mBAGhD,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAS,KAAT,CAAmB,CACnC,GAAI,OAAO,EAAP,GAAc,EAAd,CAAkB,CACpB,OAAS,KAAT,CADoB,CADN,CAAlB,CAHgD,OASzC,MAAP,CATgD;;;;GAiB3C,SAAS,oBAAT,CAA8B,QAA9B,CAAwC,CAC7C,IAAI,sBAAJ,CAAkB,OAAS,CAAC,CAAD,CADkB,mBAG7C,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAS,KAAT,CAAmB,CACnC,GAAI,OAAO,IAAP,GAAgB,MAAhB,CAAwB,CAC1B,IAAI,SAAW,OAAO,OAAP,CAAiB,OAAO,OAAP,CAAe,MAAf,CAAwB,CAAzC,CADW,GAEtB,wBAAY,YAAZ,GAA6B,SAAW,YAAX,CAAyB,CACxD,aAAe,QAAf,CADwD,MAExD,CAAS,KAAT,CAFwD,CAF5D,CADgB,CAAlB,CAH6C,OAatC,MAAP,CAb6C;;;;;GAsBxC,SAAS,uBAAT,CAAiC,QAAjC,CAA2C,EAA3C,CAA+C,CACpD,IAAI,OAAS,CAAC,CAAD,CADuC,mBAGpD,CAAQ,QAAR,CAAkB,SAAC,MAAD,CAAS,KAAT,CAAmB,CACnC,GAAI,OAAO,IAAP,GAAgB,MAAhB,CAAwB,CAC1B,oBAAQ,OAAO,OAAP,CAAgB,kBAAY,CAClC,GAAI,WAAa,EAAb,CAAiB,CACnB,OAAS,KAAT,CADmB,CADC,CAAxB,CAD0B,CADZ,CAAlB,CAHoD,OAa7C,MAAP,CAboD;;;;;GAsB/C,SAAS,eAAT,CAAyB,QAAzB,CAAmC,KAAnC,CAA0C,CAC/C,IAAI,OAAS,CAAC,CAAD,CADkC,mBAG/C,CAAQ,QAAR,CAAkB,gBAAU,CAC1B,GAAI,OAAO,IAAP,GAAgB,MAAhB,CAAwB,CAC1B,GAAI,OAAO,KAAP,GAAiB,KAAjB,CAAwB,CAC1B,OAAS,MAAT,CAD0B,CAD9B,CADgB,CAAlB,CAH+C,OAWxC,MAAP,CAX+C;;;;;GAoB1C,SAAS,0BAAT,CAAoC,WAApC,CAAiD,SAAjD,CAA4D,CACjE,OAAO,CACL,EAAG,eAAO,OAAP,CAAe,CAAE,IAAK,UAAU,CAAV,CAAa,IAAK,SAAC,CAAU,CAAV,CAAc,UAAU,KAAV,CAAmB,YAAY,KAAZ,CAA1E,CAAH,CACA,EAAG,eAAO,OAAP,CAAe,CAAE,IAAK,UAAU,CAAV,CAAa,IAAK,SAAC,CAAU,CAAV,CAAc,UAAU,MAAV,CAAoB,YAAY,MAAZ,CAA3E,CAAH,CAFF,CADiE","file":"game.js","sourcesContent":["import { forEach, isUndefined } from 'lodash';\nimport { chance } from './vendor';\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {Object}\n */\nexport function findEntityById(entities, id) {\n  let result = null;\n\n  forEach(entities, (entity) => {\n    if (entity.id === id) {\n      result = entity;\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {number}\n */\nexport function findEntityIndexById(entities, id) {\n  let result = -1;\n\n  forEach(entities, (entity, index) => {\n    if (entity.id === id) {\n      result = index;\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @returns {number}\n */\nexport function findWeakestTeamIndex(entities) {\n  let leastPlayers, result = -1;\n\n  forEach(entities, (entity, index) => {\n    if (entity.type === 'base') {\n      let teamSize = entity.players ? entity.players.length : 0;\n      if (isUndefined(leastPlayers) || teamSize < leastPlayers) {\n        leastPlayers = teamSize;\n        result = index;\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @param {string} id\n * @returns {number}\n */\nexport function findTeamIndexByPlayerId(entities, id) {\n  let result = -1;\n\n  forEach(entities, (entity, index) => {\n    if (entity.type === 'base') {\n      forEach(entity.players, playerId => {\n        if (playerId === id) {\n          result = index;\n        }\n      });\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Array} entities\n * @param {string} color\n * @returns {Object}\n */\nexport function findTeamByColor(entities, color) {\n  let result = -1;\n\n  forEach(entities, entity => {\n    if (entity.type === 'base') {\n      if (entity.color === color) {\n        result = entity;\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n *\n * @param {Object} playerProps\n * @param {Object} baseProps\n * @returns {{x: number, y: number}}\n */\nexport function calculateBaseSpawnPosition(playerProps, baseProps) {\n  return {\n    x: chance.integer({ min: baseProps.x, max: (baseProps.x + baseProps.width) - playerProps.width }),\n    y: chance.integer({ min: baseProps.y, max: (baseProps.y + baseProps.height) - playerProps.height })\n  };\n}\n"]}